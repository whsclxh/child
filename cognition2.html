<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<script src="jquery-3.3.1.min.js"></script>
<script type="text/javascript">
	window.onload = function(){
		var q11 = document.getElementById("q11");        									
		q11.value = question1option[0];
		var q12 = document.getElementById("q12");        									
		q12.value = question1option[1];
		var q13 = document.getElementById("q13");        									
		q13.value = question1option[2];
		var q14 = document.getElementById("q14");        									
		q14.value = question1option[3];
		var q21 = document.getElementById("q21");        									
		q21.value = question2option[0];
		var q22 = document.getElementById("q22");        									
		q22.value = question2option[1];
		var q23 = document.getElementById("q23");        									
		q23.value = question2option[2];
		var q24 = document.getElementById("q24");        									
		q24.value = question2option[3];
		var q31 = document.getElementById("q31");        									
		q31.value = question3option[0];
		var q32 = document.getElementById("q32");        									
		q32.value = question3option[1];
		var q33 = document.getElementById("q33");        									
		q33.value = question3option[2];
		var q34 = document.getElementById("q34");        									
		q34.value = question3option[3];
		var q41 = document.getElementById("q41");        									
		q41.value = question4option[0];
		var q42 = document.getElementById("q42");        									
		q42.value = question4option[1];
		var q43 = document.getElementById("q43");        									
		q43.value = question4option[2];
		var q44 = document.getElementById("q44");        									
		q44.value = question4option[3];       
		var anw1 = document.getElementById("anw1");        									
		anw1.value = correctanwser[0];
		var anw2 = document.getElementById("anw2");        									
		anw2.value = correctanwser[1];
		var anw3 = document.getElementById("anw3");        									
		anw3.value = correctanwser[2];
		var anw4 = document.getElementById("anw4");        									
		anw4.value = correctanwser[3];
		var pic0 = document.getElementById("pic0");        									
		pic0.value = pic[0];
		var pic1 = document.getElementById("pic1");        									
		pic1.value = pic[1];
		var pic2 = document.getElementById("pic2");        									
		pic2.value = pic[2];
		var pic3 = document.getElementById("pic3");        									
		pic3.value = pic[3];
		var pic4 = document.getElementById("pic4");        									
		pic4.value = pic[4];
		var pic5 = document.getElementById("pic5");        									
		pic5.value = pic[5];
		var pic6 = document.getElementById("pic6");        									
		pic6.value = pic[6];
		var pic7 = document.getElementById("pic7");        									
		pic7.value = pic[7];
		var pic8 = document.getElementById("pic8");        									
		pic8.value = pic[8];
		var qf1 = document.getElementById("qf1");        									
		qf1.value = questionfruit[0];
		var qf2 = document.getElementById("qf2");        									
		qf2.value = questionfruit[1];
		var qf3 = document.getElementById("qf3");        									
		qf3.value = questionfruit[2];
		var qf4 = document.getElementById("qf4");        									
		qf4.value = questionfruit[3];
		var qd1 = document.getElementById("qd1");        									
		qd1.value = directionarray[0];
		var qd2 = document.getElementById("qd2");        									
		qd2.value = directionarray[1];
		var qd3 = document.getElementById("qd3");        									
		qd3.value = directionarray[2];
		var qd4 = document.getElementById("qd4");        									
		qd4.value = directionarray[3];
		var qo11 = document.getElementById("qo11");        									
		qo11.value = question1option[0];
		var qo12 = document.getElementById("qo12");        									
		qo12.value = question1option[1];
		var qo13 = document.getElementById("qo13");        									
		qo13.value = question1option[2];
		var qo14 = document.getElementById("qo14");        									
		qo14.value = question1option[3];
		var qo21 = document.getElementById("qo21");        									
		qo21.value = question2option[0];
		var qo22 = document.getElementById("qo22");        									
		qo22.value = question2option[1];
		var qo23 = document.getElementById("qo23");        									
		qo23.value = question2option[2];
		var qo24 = document.getElementById("qo24");        									
		qo24.value = question2option[3];
		var qo31 = document.getElementById("qo31");        									
		qo31.value = question3option[0];
		var qo32 = document.getElementById("qo32");        									
		qo32.value = question3option[1];
		var qo33 = document.getElementById("qo33");        									
		qo33.value = question3option[2];
		var qo34 = document.getElementById("qo34");        									
		qo34.value = question3option[3];
		var qo41 = document.getElementById("qo41");        									
		qo41.value = question4option[0];
		var qo42 = document.getElementById("qo42");        									
		qo42.value = question4option[1];
		var qo43 = document.getElementById("qo43");        									
		qo43.value = question4option[2];
		var qo44 = document.getElementById("qo44");        									
		qo44.value = question4option[3];
    };

	function getRandom(minNum,maxNum){	
		return Math.floor(Math.random()*(maxNum-minNum+1))+minNum;
	}

	function getRandomArray(minNum,maxNum,n){	                                         //隨機產生不重覆的n個數字
		var rdmArray=[n];		                                                             //儲存產生的陣列
		for(var i=0;i<n;i++){
			var rdm=0;		                                                             //暫存的亂數
			do{
				var exist=false;															 //此亂數是否已存在
				rdm=getRandom(minNum, maxNum);											 //取得亂數
																							 //檢查亂數是否存在於陣列中，若存在則繼續回圈
				if(rdmArray.indexOf(rdm)!=-1) exist=true;
			}while(exist);																 //產生沒出現過的亂數時離開迴圈
			rdmArray[i]=rdm;
		}
		return rdmArray;
	}

	function checkoption2(x,y){
		var no=[];
		do{	
			var a=true;
			no=getRandomArray(0,8,4);
				if((no.indexOf(x)!=-1)&&(no.indexOf(y)!=-1)) 
					var a=false;
			}while(a);
		return no;
	}

	function checkoption3(x,y,z){
		var no=[];
		do{	
			var a=true;
			no=getRandomArray(0,8,4);
				if((no.indexOf(x)!=-1)&&(no.indexOf(y)!=-1)&&(no.indexOf(z)!=-1)) 
					var a=false;
			}while(a);
		return no;
	}


	function checkoption4(x,y,z,w){
		var no=[];
		do{	
			var a=true;
			no=getRandomArray(0,8,4);
				if((no.indexOf(x)!=-1)&&(no.indexOf(y)!=-1)&&(no.indexOf(z)!=-1)&&(no.indexOf(w)!=-1)) 
					var a=false;
			}while(a);
		return no;
	}

	var pic=getRandomArray(0,8,9);
	var questionfruit=getRandomArray(0,8,4);
	

	function pictures(x){
		var imgurl=[
    	'img/animal/bear.png',
    	'img/animal/crocodile.png',
    	'img/animal/elephant.png',
    	'img/animal/giraffe.png',
    	'img/animal/gorilla.png',
    	'img/animal/hedgehog.png',
    	'img/animal/kangaroo.png',
    	'img/animal/koala.png',
    	'img/animal/monkey.png',
    	'img/animal/lion.png',
    	'img/animal/owl.png',
    	'img/animal/penguin.png',
	];
		document.write('<img src="'+imgurl[x]+'">');
	}
	function setquestionname(x){
		var fruitsname=[
			'熊',
			'鱷魚',
			'大象',
			'長頸鹿',
			'大猩猩',
			'刺蝟',
			'袋鼠',
			'無尾熊',
			'猴子',
			'獅子',
			'貓頭鷹',
			'企鵝',
		];
		document.write(fruitsname[pic[x]]);
	}

	function setquestiondirection(x){
		var a;
		if(x==0){
			a=getRandom(0,1);
		}else if(x==1){
			a=getRandom(0,2);
		}else if(x==2){
			a=getRandom(0,1);
		}else if(x==3){
			a=getRandom(0,2);
		}else if(x==4){
			a=getRandom(0,3);
		}else if(x==5){
			a=getRandom(0,2);
		}else if(x==6){
			a=getRandom(0,1);
		}else if(x==7){
			a=getRandom(0,2);
		}else{
			a=getRandom(0,1);
		}
		return a;
	}

	var directionarray=[setquestiondirection(questionfruit[0]),setquestiondirection(questionfruit[1]),setquestiondirection(questionfruit[2]),setquestiondirection(questionfruit[3]),];
	function writedirection(x,y){
		if(x==0){
			var direction=[
			'下面',
			'右邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==1){
			var direction=[
			'下面',
			'左邊',
			'右邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==2){
			var direction=[
			'下面',
			'左邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==3){
			var direction=[
			'上面',
			'下面',
			'右邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==4){
			var direction=[
			'上面',
			'下面',
			'左邊',
			'右邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==5){
			var direction=[
			'上面',
			'下面',
			'左邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==6){
			var direction=[
			'上面',
			'右邊',];
			document.write(direction[directionarray[y]]);
		}else if(x==7){
			var direction=[
			'上面',
			'左邊',
			'右邊',];
			document.write(direction[directionarray[y]]);
		}else{
			var direction=[
			'上面',
			'左邊',];
			document.write(direction[directionarray[y]]);
		}
	}

	function setoption(x){
		var a=[];
		if(x==0){
			a=checkoption2(1,3);
		}else if(x==1){
			a=checkoption3(0,2,4);
		}else if(x==2){
			a=checkoption2(1,5);
		}else if(x==3){
			a=checkoption3(0,4,6);
		}else if(x==4){
			a=checkoption4(1,3,5,7);
		}else if(x==5){
			a=checkoption3(2,4,8);
		}else if(x==6){
			a=checkoption2(3,7);
		}else if(x==7){
			a=checkoption3(4,6,8);
		}else{
			a=checkoption2(5,7);
		}
		return a;
	}
	var question1option=setoption(questionfruit[0]);
	var question2option=setoption(questionfruit[1]);
	var question3option=setoption(questionfruit[2]);
	var question4option=setoption(questionfruit[3]);

	function getanwser(x,y){
		var anw;
		if(x==0){
			if(y==0){
				anw=x+3;
			}else{
				anw=x+1;
			}
		}else if(x==1){
			if(y==0){
				anw=x+3;
			}else if(x==1){
				anw=x-1;
			}else{
				anw=x+1;
			}
		}else if(x==2){
			if(y==0){
				anw=x+3;
			}else{
				anw=x-1;
			}
		}else if(x==3){
			if(y==0){
				anw=x-3;
			}else if(y==1){
				anw=x+3;
			}else{
				anw=x+1;
			}
		}else if(x==4){
			if(y==0){
				anw=x-3;
			}else if(y==1){
				anw=x+3;
			}else if(y==2){
				anw=x-1;
			}else{
				anw=x+1;
			}
		}else if(x==5){
			if(y==0){
				anw=x-3;
			}else if(y==1){
				anw=x+3;
			}else{
				anw=x-1;
			}
		}else if(x==6){
			if(y==0){
				anw=x-3;
			}else{
				anw=x+1;
			}
		}else if(x==7){
			if(y==0){
				anw=x-3;
			}else if(y==1){
				anw=x-1;
			}else{
				anw=x+1;
			}
		}else{
			if(y==0){
				anw=x-3;
			}else{
				anw=x-1;
			}
		}
		return anw;
	}
	correctanwser=[getanwser(questionfruit[0],directionarray[0]),
				   getanwser(questionfruit[1],directionarray[1]),
				   getanwser(questionfruit[2],directionarray[2]),
				   getanwser(questionfruit[3],directionarray[3]),];
	function test(){
		document.write(correctanwser);
	}
</script>
<body>
	<h2>請幫忙找一找,選出正確的答案,一題5分</h2>
	<form method="post" action="cognition2_finish.php">
		<table border="1" style="margin: auto;">
			<tr>
				<td style="text-align: center;"><script>pictures(pic[0]);</script></td>
				<td style="text-align: center;"><script>pictures(pic[1]);</script></td>
				<td style="text-align: center;"><script>pictures(pic[2]);</script></td>
			</tr>
			<tr>
				<td style="text-align: center;"><script>pictures(pic[3]);</script></td>
				<td style="text-align: center;"><script>pictures(pic[4]);</script></td>
				<td style="text-align: center;"><script>pictures(pic[5]);</script></td>
			</tr>
			<tr>
				<td style="text-align: center;"><script>pictures(pic[6]);</script></td>
				<td style="text-align: center;"><script>pictures(pic[7]);</script></td>
				<td style="text-align: center;"><script>pictures(pic[8]);</script></td>
			</tr>
		</table>
		<table border="1" style="margin: auto;">
			<tr>
				<td>
					1.在<script>setquestionname(questionfruit[0])</script>的<script>writedirection(questionfruit[0],0)</script>是
				</td>
				<td>
					<label><input type="radio" id="q11" name="question1"><script>pictures(pic[question1option[0]]);</script></label>
					<label><input type="radio" id="q12" name="question1"><script>pictures(pic[question1option[1]]);</script></label>
					<label><input type="radio" id="q13" name="question1"><script>pictures(pic[question1option[2]]);</script></label>
					<label><input type="radio" id="q14" name="question1"><script>pictures(pic[question1option[3]]);</script></label>
				</td>
			</tr>
			<tr>
				<td>
					2.在<script>setquestionname(questionfruit[1])</script>的<script>writedirection(questionfruit[1],1)</script>是
				</td>
				<td>
					<label><input type="radio" id="q21" name="question2"><script>pictures(pic[question2option[0]]);</script></label>
					<label><input type="radio" id="q22" name="question2"><script>pictures(pic[question2option[1]]);</script></label>
					<label><input type="radio" id="q23" name="question2"><script>pictures(pic[question2option[2]]);</script></label>
					<label><input type="radio" id="q24" name="question2"><script>pictures(pic[question2option[3]]);</script></label>
				</td>
			</tr>
			<tr>
				<td>
					3.在<script>setquestionname(questionfruit[2])</script>的<script>writedirection(questionfruit[2],2)</script>是
				</td>
				<td>
					<label><input type="radio" id="q31" name="question3"><script>pictures(pic[question3option[0]]);</script></label>
					<label><input type="radio" id="q32" name="question3"><script>pictures(pic[question3option[1]]);</script></label>
					<label><input type="radio" id="q33" name="question3"><script>pictures(pic[question3option[2]]);</script></label>
					<label><input type="radio" id="q34" name="question3"><script>pictures(pic[question3option[3]]);</script></label>
				</td>
			</tr>
			<tr>
				<td>
					4.在<script>setquestionname(questionfruit[3])</script>的<script>writedirection(questionfruit[3],3)</script>是
				</td>
				<td>
					<label><input type="radio" id="q41" name="question4"><script>pictures(pic[question4option[0]]);</script></label>
					<label><input type="radio" id="q42" name="question4"><script>pictures(pic[question4option[1]]);</script></label>
					<label><input type="radio" id="q43" name="question4"><script>pictures(pic[question4option[2]]);</script></label>
					<label><input type="radio" id="q44" name="question4"><script>pictures(pic[question4option[3]]);</script></label>
				</td>
			</tr>
		</table>
		<input type="hidden" id="anw1" name="anwser1"/>				
		<input type="hidden" id="anw2" name="anwser2"/>
		<input type="hidden" id="anw3" name="anwser3"/>
		<input type="hidden" id="anw4" name="anwser4"/>
		<input type="hidden" id="pic0" name="picture0"/>
		<input type="hidden" id="pic1" name="picture1"/>				
		<input type="hidden" id="pic2" name="picture2"/>
		<input type="hidden" id="pic3" name="picture3"/>
		<input type="hidden" id="pic4" name="picture4"/>
		<input type="hidden" id="pic5" name="picture5"/>
		<input type="hidden" id="pic6" name="picture6"/>
		<input type="hidden" id="pic7" name="picture7"/>
		<input type="hidden" id="pic8" name="picture8"/>
		<input type="hidden" id="qf1" name="questionfruit1"/>
		<input type="hidden" id="qf2" name="questionfruit2"/>
		<input type="hidden" id="qf3" name="questionfruit3"/>
		<input type="hidden" id="qf4" name="questionfruit4"/>
		<input type="hidden" id="qd1" name="questiondirection1"/>
		<input type="hidden" id="qd2" name="questiondirection2"/>
		<input type="hidden" id="qd3" name="questiondirection3"/>
		<input type="hidden" id="qd4" name="questiondirection4"/>
		<input type="hidden" id="qo11" name="questionoption11"/>
		<input type="hidden" id="qo12" name="questionoption12"/>
		<input type="hidden" id="qo13" name="questionoption13"/>
		<input type="hidden" id="qo14" name="questionoption14"/>
		<input type="hidden" id="qo21" name="questionoption21"/>
		<input type="hidden" id="qo22" name="questionoption22"/>
		<input type="hidden" id="qo23" name="questionoption23"/>
		<input type="hidden" id="qo24" name="questionoption24"/>
		<input type="hidden" id="qo31" name="questionoption31"/>
		<input type="hidden" id="qo32" name="questionoption32"/>
		<input type="hidden" id="qo33" name="questionoption33"/>
		<input type="hidden" id="qo34" name="questionoption34"/>
		<input type="hidden" id="qo41" name="questionoption41"/>
		<input type="hidden" id="qo42" name="questionoption42"/>
		<input type="hidden" id="qo43" name="questionoption43"/>
		<input type="hidden" id="qo44" name="questionoption44"/>
		<div style="text-align: center;">
		<button>離開</button>
		<button type="submit" id="button">結束作答</button>
		</div>
	</form>
</body>
</html>