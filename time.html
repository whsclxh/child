<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script src="library/jquery.min.js"></script>
  <script src="library/svg.min.js"></script>


  <!-- <script type="text/javascript" src="time_2.js"></script> -->
  <script type="text/javascript" src="time_1.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  
  <!-- <script type="text/javascript" src="time_4.js"></script>
  <script type="text/javascript" src="time_5.js"></script> -->



  <style type="text/css">
    table,td,th {
      border: 1px solid black;
    }

    table {
      height: 50%;
      width: 40%;
      margin-top: 100px;
      margin-left: auto;
      margin-right: auto;
    }

    body {
      
      margin: 0 auto;
      /* background: #ff8a50; */
      font-family: sans-serif;
    }

    .disable-select {
      -webkit-touch-callout: none; /* iOS Safari */
      -webkit-user-select: none;   /* Chrome/Safari/Opera */
      -khtml-user-select: none;    /* Konqueror */
      -moz-user-select: none;      /* Firefox */
      -ms-user-select: none;       /* Internet Explorer/Edge */
      user-select: none;           /* Non-prefixed version, currently supported by any browser but < IE9 */
    }

  * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

*:before,
*:after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}



body,
div,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
h4,
h5,
h6,
pre,
code,
form,
fieldset,
legend,
input,
button,
textarea,
p,
blockquote,
th,
td {
  margin: 0;
  padding: 0;
}

body {
  background: #fff;
  color: #555;
  font-size: 14px;
  font-family: "Arial", "Microsoft YaHei", "黑体", "宋体", sans-serif;
}

td,
th,
caption {
  font-size: 14px;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: normal;
  font-size: 100%;
}

address,
caption,
cite,
code,
dfn,
em,
strong,
th,
var {
  font-style: normal;
  font-weight: normal;
}

a {
  color: #555;
  text-decoration: none;
}

a:link, a:visited,a:hover ,a:active{
  text-decoration: none;

}

img {
  border: none;
  vertical-align: middle;
}

ol,
ul,
li {
  list-style: none;
}

input,
textarea,
select,
button {
  font: 14px "Arial", "Microsoft YaHei", "黑体", "宋体", sans-serif;
}

table {
  border-collapse: collapse;
}

html {
  overflow-y: scroll;
}

.clearfix:before,
.clearfix:after {
  content: " ";
  display: inline-block;
  height: 0;
  clear: both;
  visibility: hidden;
}

.clearfix {
  *zoom: 1;
}

/*公共类*/

.fl {
  float: left
}

.fr {
  float: right
}

.al {
  text-align: left
}

.ac {
  text-align: center
}

.ar {
  text-align: right
}

.hide {
  display: none
}
* {
    box-sizing: border-box
}

html,
body {
    height: 100%;
    background: #f5f5f5;
}

.container {
    margin: 0 auto;
    max-width: 960px;
    height: 100%;
    background: #fff;
}

.draw-container {
    position: relative;
    height: 800px;
    background: #fff;
}

.draw-container ul {
    margin-top: 80px;
}

.data-list {
    position: absolute;
}

.question-list {
    left: 50px;
}

.answer-list {
    right: 50px;
}

 .data-list li {
    margin: 15px;
    padding: 0 10px;
    /* width: 100%;
    height: 30%; */
    background: #ecf5ff;
    line-height: 30px;
    font-size: 16px;
    
    border: 1px solid #ecf5ff;
    border-radius: 10px;
    cursor: crosshair;
    text-align: center
}






.hover-g {
    cursor: pointer;
    opacity: 1;
    stroke-width: 4;
}



.result-container {
    padding: 20px;
    border-top: 1px solid #333;
}
.result-container li{
    font-size: 16px;
    line-height: 35px;
}
  
  </style>
</head>

<script>
var cart = new Array("img/clock_img/p1.png",	"img/clock_img/p2.png", "img/clock_img/p3.png",	"img/clock_img/p4.png",);
//打亂陣列
function randomsort(a, b) {
return Math.random()>.5 ? -1 : 1;
//用Math.random()函式生成0~1之間的隨機數與0.5比較，返回-1或1
}
cart.sort(randomsort);

var que = new Array("img/clock_img/wakeup.jpg", "img/clock_img/breakfast.jpg","img/clock_img/teach.jpg","img/clock_img/sleep.jpg");



  


window.onload=function(){
document.getElementById("q3q11");
document.getElementById("q3q12");
document.getElementById("q3q13");
if(f0==0){
  q3q11.value = h5;
  q3q12.value = h51;
  q3q13.value = h52;
}
if(f0==1){
  q3q11.value = h51;
  q3q12.value = h5;
  q3q13.value = h52;
}
if(f0==2){
  q3q11.value = h51;
  q3q12.value = h52;
  q3q13.value = h5;
}

document.getElementById("q3q21");
document.getElementById("q3q22");
document.getElementById("q3q23");
if(f1==0){
  q3q21.value = h6;
  q3q22.value = h61;
  q3q23.value = h62;
}
if(f1==1){
  q3q21.value = h61;
  q3q22.value = h6;
  q3q23.value = h62;
}
if(f1==2){
  q3q21.value = h61;
  q3q22.value = h62;
  q3q23.value = h6;
}
document.getElementById("q3q31");
document.getElementById("q3q32");
document.getElementById("q3q33");
if(f2==0){
  q3q31.value = h7;
  q3q32.value = h71;
  q3q33.value = h72;
}
if(f2==1){
  q3q31.value = h71;
  q3q32.value = h7;
  q3q33.value = h72;
}
if(f2==2){
  q3q31.value = h71;
  q3q32.value = h72;
  q3q33.value = h7;
}
document.getElementById("q3q41");
document.getElementById("q3q42");
document.getElementById("q3q43");
if(f3==0){
  q3q41.value = h8;
  q3q42.value = h81;
  q3q43.value = h82;
}
if(f3==1){
  q3q41.value = h81;
  q3q42.value = h8;
  q3q43.value = h82;
}
if(f3==2){
  q3q41.value = h81;
  q3q42.value = h82;
  q3q43.value = h8;
}



var q1a1 = document.getElementById("q1a1") ;
q1a1.value = h1;
var q1a2 = document.getElementById("q1a2");
q1a2.value = m1;
var q1a3 = document.getElementById("q1a3");
q1a3.value = h2;
var q1a4 = document.getElementById("q1a4");
q1a4.value = m2;
var q1a5 = document.getElementById("q1a5");
q1a5.value = h3;
var q1a6 = document.getElementById("q1a6");
q1a6.value = m3;
var q1a7 = document.getElementById("q1a7");
q1a7.value = h4;
var q1a8 = document.getElementById("q1a8");
q1a8.value = m4;





var q3ans1 = document.getElementById("q3ans1");
q3ans1.value = h5;
var q3ans2 = document.getElementById("q3ans2");
q3ans2.value = h6;
var q3ans3 = document.getElementById("q3ans3");
q3ans3.value = h7;
var q3ans4 = document.getElementById("q3ans4");
q3ans4.value = h8;

var q3opt11 = document.getElementById("q3opt11");
var q3opt12 = document.getElementById("q3opt12");
var q3opt13 = document.getElementById("q3opt13");
if(f0==0){
  q3opt11.value = h5;
  q3opt12.value = h51;
  q3opt13.value = h52;
}
if(f0==1){
  q3opt11.value = h51;
  q3opt12.value = h5;
  q3opt13.value = h52;
}
if(f0==2){
  q3opt11.value = h51;
  q3opt12.value = h52;
  q3opt13.value = h5;
}

var q3opt21 = document.getElementById("q3opt21");
var q3opt22 = document.getElementById("q3opt22");
var q3opt23 = document.getElementById("q3opt23");
if(f1==0){
  q3opt21.value = h6;
  q3opt22.value = h61;
  q3opt23.value = h62;
}
if(f1==1){
  q3opt21.value = h61;
  q3opt22.value = h6;
  q3opt23.value = h62;
}
if(f1==2){
  q3opt21.value = h61;
  q3opt22.value = h62;
  q3opt23.value = h6;
}

var q3opt31 = document.getElementById("q3opt31");
var q3opt32 = document.getElementById("q3opt32");
var q3opt33 = document.getElementById("q3opt33");
if(f2==0){
  q3opt31.value = h7;
  q3opt32.value = h71;
  q3opt33.value = h72;
}
if(f2==1){
  q3opt31.value = h71;
  q3opt32.value = h7;
  q3opt33.value = h72;
}
if(f2==2){
  q3opt31.value = h71;
  q3opt32.value = h72;
  q3opt33.value = h7;
}

var q3opt41 = document.getElementById("q3opt41");
var q3opt42 = document.getElementById("q3opt42");
var q3opt43 = document.getElementById("q3opt43");
if(f3==0){
  q3opt41.value = h8;
  q3opt42.value = h81;
  q3opt43.value = h82;
}
if(f3==1){
  q3opt41.value = h81;
  q3opt42.value = h8;
  q3opt43.value = h82;
}
if(f3==2){
  q3opt41.value = h81;
  q3opt42.value = h82;
  q3opt43.value = h8;
}


var q4ans1 = document.getElementById("q4ans1");
if(m6<m5){
  q4ans1.value = (m6+60)-m5;
}else{
  q4ans1.value = m6-m5;
}
var q4ans2 = document.getElementById("q4ans2");
if(m7<m6){
  q4ans2.value = (m7+60)-m6;
}else{
  q4ans2.value = m7-m6;
}
var q4ans3 = document.getElementById("q4ans3");
if(m9<m8){
  q4ans3.value = (m9+60)-m8;
}else{
  q4ans3.value = m9-m8;
}
var q4ans4 = document.getElementById("q4ans4");
if(m10<m9){
  q4ans4.value =(m10+60)-m9;
}else{
  q4ans4.value = m10-m9;
}

var q4opt1 = document.getElementById("q4opt1");
if(m6<m5){
  q4opt1.value = (m6+60)-m5;
}else{
  q4opt1.value = m6-m5;
}
var q4opt2 = document.getElementById("q4opt2");
if(m7<m6){
  q4opt2.value = (m7+60)-m6;
}else{
  q4opt2.value = m7-m6;
}
var q4opt3 = document.getElementById("q4opt3");
if(m9<m8){
  q4opt3.value = (m9+60)-m8;
}else{
  q4opt3.value = m9-m8;
}
var q4opt4 = document.getElementById("q4opt4");
if(m10<m9){
  q4opt4.value =(m10+60)-m9;
}else{
  q4opt4.value = m10-m9;
}

var q5ans1 = document.getElementById("q5ans1");
if(cart[0]=="img/clock_img/p1.png"){
  q5ans1.value = 1;
}
if(cart[0]=="img/clock_img/p2.png"){
  q5ans1.value = 2;
}
if(cart[0]=="img/clock_img/p3.png"){
  q5ans1.value = 3;
}
if(cart[0]=="img/clock_img/p4.png"){
  q5ans1.value = 4;
}
var q5ans2 = document.getElementById("q5ans2");
if(cart[1]=="img/clock_img/p1.png"){
  q5ans2.value = 1;
}
if(cart[1]=="img/clock_img/p2.png"){
  q5ans2.value = 2;
}
if(cart[1]=="img/clock_img/p3.png"){
  q5ans2.value = 3;
}
if(cart[1]=="img/clock_img/p4.png"){
  q5ans2.value = 4;
}
var q5ans3 = document.getElementById("q5ans3");
if(cart[2]=="img/clock_img/p1.png"){
  q5ans3.value = 1;
}
if(cart[2]=="img/clock_img/p2.png"){
  q5ans3.value = 2;
}
if(cart[2]=="img/clock_img/p3.png"){
  q5ans3.value = 3;
}
if(cart[2]=="img/clock_img/p4.png"){
  q5ans3.value = 4;
}
var q5ans4 = document.getElementById("q5ans4");
if(cart[3]=="img/clock_img/p1.png"){
  q5ans4.value = 1;
}
if(cart[3]=="img/clock_img/p2.png"){
  q5ans4.value = 2;
}
if(cart[3]=="img/clock_img/p3.png"){
  q5ans4.value = 3;
}
if(cart[3]=="img/clock_img/p4.png"){
  q5ans4.value = 4;
}

var q5opt1 = document.getElementById("q5opt1");
if(cart[0]=="img/clock_img/p1.png"){
  q5opt1.value = 1;
}
var q5opt2 = document.getElementById("q5opt2");
if(cart[1]=="img/clock_img/p2.png"){
  q5opt2.value = 2;
}
var q5opt3 = document.getElementById("q5opt3");
if(cart[2]=="img/clock_img/p3.png"){
  q5opt3.value = 3;
}
var q5opt4 = document.getElementById("q5opt4");
if(cart[3]=="img/clock_img/p4.png"){
  q5opt4.value = 4;
}





}
</script>




<body>
  
  <form method="post" action="time_finish.php" data-ajax="false">
    <div data-role="page" id="time1">
    <h3 align="center">請問現在是幾點幾分? 輸入正確時間。</h3>
    
  <table width="50%" style ="text-align:center">
    <tr style="height:280px">
      <td><canvas id="clock1" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
      <td><canvas id="clock2" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
    </tr>
    <tr style="height:40px">
      <td>
        <input type="number" data-role="none" style="width:10%"  name="q1ans1" min="1" max="12" >時<input type="number" data-role="none" style="width:10%"  name="q1ans2" min="00" max="59" step="5" >分
      </td>
        
      <td>
        <input type="number" data-role="none" style="width:10%"  name="q1ans3" min="1" max="12" >時<input type="number" data-role="none" style="width:10%"  name="q1ans4" min="00" max="59" step="5" >分
      </td>
    </tr>
 
    <tr style="height: 280px">
      <td>
        <canvas id="clock3" width="200%" height="200%" style="display:block; margin:auto;"></canvas>
      </td>
      <td>
        <canvas id="clock4" width="200%" height="200%" style="display:block; margin:auto;"></canvas>
      </td>
    </tr>
    <tr style="height: 40px">
      <td>
        <input type="number" data-role="none" style="width:10%"  name="q1ans5" min="1" max="12" >時<input type="number" data-role="none" style="width:10%"  name="q1ans6" min="00" max="59" step="5" >分
      </td>
        
      <td>
        <input type="number" data-role="none" style="width:10%"  name="q1ans7" min="1" max="12" >時<input type="number" data-role="none" style="width:10%"  name="q1ans8" min="00" max="59" step="5" >分
      </td>
    </tr>
  </table>
  <div align="center">
    <a href="#time2" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide">下一題</a>
  </div>
  </div>
  

<div data-role="page" id="time2">
<h3 align="center">請選出正常的作息時間。</h3>
<div align="center">
    <div class="container" align="center">
      <div id="problems" class="problems disable-select">
      </div>
    </div>
  </div>
  <table border="1" align="center">
		<tr>
			<td>
        <div style="text-align:center">
            <span style="font-family:Impact; font-size: 2.2cm">AM 7:00</span><input type="radio" data-role="none" name="ans12">
			  <script>document.write('<img src="' +que[0]+ '"width="140" height="140" style=" margin:auto;">');</script>
        <input type="radio" data-role="none" name="ans12"><span style="font-family:Impact; font-size: 2.2cm">PM 3:00</span>
        </div>
      </td>
    </tr>
    
		<tr>
			<td>
        <div style="text-align:center">
            <span style="font-family:Impact; font-size: 2.2cm">AM 7:30</span><input type="radio" data-role="none" name="ans13">
				<script>document.write('<img src="' +que[1]+ '"width="140" height="140" style=" margin:auto;">');</script>
        <input type="radio" data-role="none" name="ans13"><span style="font-family:Impact; font-size: 2.2cm">PM 1:00</span>
        </div>
			</td>
    </tr>
    
		<tr>
			<td>
        <div style="text-align:center">
            <span style="font-family:Impact; font-size: 2.2cm">AM 10:00</span><input type="radio" data-role="none" name="ans14">
        <script>document.write('<img src="' +que[2]+ '"width="140" height="140" style=" margin:auto;">');</script>
        <input type="radio" data-role="none" name="ans14"><span style="font-family:Impact; font-size: 2.2cm">PM 7:00</span>
        </div>
			</td>
    </tr>
    
		<tr>
			<td>
        <div style="text-align:center">
            <span style="font-family:Impact; font-size: 2.2cm">PM 10:00</span><input type="radio" data-role="none" name="ans15">
        <script>document.write('<img src="' +que[3]+ '"width="140" height="140" style=" margin:auto;">');</script>
        <input type="radio" data-role="none" name="ans15"><span style="font-family:Impact; font-size: 2.2cm">PM 5:00</span>
        </div>
			</td>
		</tr>
	
  </table>

<div align="center">
  <a href="#time1" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide" data-direction="reverse">上一題</a>
  <a href="#time3" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide">下一題</a>
</div>
</div>
    

    <div data-role="page" id="time3">
        <h3 align="center">請連到正確的時間。</h3>
        <div id="draw" class="draw-container">

          <ul class="question-list data-list"></ul>
     

          <ul class="answer-list data-list"></ul>

        </div>

        <div align="center">
          <a href="#time2" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide" data-direction="reverse">上一題</a>
          <a href="#time4" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide">下一題</a>
        </div>
    </div>
    
<script type="text/javascript">
  const line = {
    init: function (questionObj, answerObj) {
        this.draw = SVG('draw').size("100%", "100%");
        this.lineArr = [];
        this.currentInfo = {};
        this.createList(questionObj)
        this.createList(answerObj)
        this.bindBtnEvent()
        this.bindParentsEvent()
        
        
    },
    /* 创建列表 */
    createList: function (obj, callback) {
        let type = obj.type,
            data = obj.data,
            content = [];
        if (type == 'question') {
            $('.question-list').empty()
            data.forEach(element => {
                let item = $('<li class="question-li" data-question=' + element.questionKey + ' data-answer=' + element.answer + '></li>'),
                    obj = {};
                item.append(element.question);
                obj.beginValue = element.questionKey;
                obj.line = this.createLine();
                this.lineArr.push(obj)
                content.push(item);
            });
            // $('.question-list').html(content)
            content.forEach(e => {
              $('.question-list').append(e);
            });
        } else {
            $('.answer-list').empty()
            data.forEach(element => {
                let item = '<li class="answer-li" data-answer=' + element + '>' + element + '</li>';
                content.push(item);
            });
            $('.answer-list').html(content);

        }
        // this.itemForEach(true)
    },
    /* 绑定按钮事件 */
    bindBtnEvent: function () {
        let self = this,
            parentPosition = $('#draw').offset();
        /* 鼠标按下question-list列，调整线条开始位置 */
        $('.question-list').on('mousedown', 'li', function (e) {

            let current = self.lineArr.find(el => {
                return el.beginValue == $(this).attr('data-question');
            });
            current.begin = {};
            current.beginElement = this;
            current.begin.y = $(this).offset().top - parentPosition.top +55 ;
            current.begin.x = $(this).offset().left - parentPosition.left  +150;
            current.line.show();
            current.line.stroke({
                color: "#67C23A",
            });
            current.line.plot(current.begin.x, current.begin.y, current.begin.x, current.begin.y);
            current.end = {};
            /* 如果存在结束位置，删除 */
            if (current.endElement) {
                $(current.endElement).removeClass('selected')
                $(this).removeClass('selected')
            }
            current.endElement = '';
            current.endValue = '';
            self.currentInfo = current;
        })
        /* 鼠标按下answer-list列，调整线条结束位置 */
        $('.answer-list').on('mouseup', 'li', function (e) {
            let current = self.lineArr.find(el => {
                return el.beginValue == self.currentInfo.beginValue;
            });

            current.end.y = $(this).offset().top - parentPosition.top -5;
            current.end.x = $(this).offset().left - parentPosition.left + 10;
            current.endElement = this;
            current.endValue = $(this).attr('data-answer');
            
            current.line.plot(current.begin.x, current.begin.y, current.end.x, current.end.y);
            $(current.beginElement).addClass('selected')
            $(current.beginElement).attr('data-selected', current.endValue)
            $(this).addClass('selected')

            self.currentInfo = '';
        })
        /* 默认答案 */
        $('#j-default').click(function (e) {
            self.itemForEach()
        })
        /* 重置 */
        $('#j-reset').click(function (e) {
            self.lineArr.forEach(el => {
                $(el.beginElement).removeClass("selected");
                $(el.beginElement).attr('data-selected', '')
                $(el.endElement).removeClass("selected");
                el.line.hide()
            })
            $('.result-display').html('')
        })
        /* 确认答案 */
        $('#j-submit').click(function (e) {
            let result = [];
            $('.question-list li').each(function (el) {
                let question = $(this).attr('data-question'),
                    userSelectd = $(this).attr('data-selected');
                if (userSelectd) {
                    let item = `<li>${question} = ${userSelectd}</li>`;
                    result.push(item)
                }

            })
            result.length ? $('.result-display').html(result) : alert('您还未选择！')
        })
    },
    /* 绑定父亲事件事件 */
    bindParentsEvent: function (params) {
        let self = this;

        $(document).mouseup(function (e) {
            if (!$(e.target).is(".answer-li") && self.currentInfo.line) {
                self.currentInfo.line.hide();
                $("#draw")
                    .find(".question-li")
                    .removeClass("display-block-hover");
            }
        })
        $('#draw').mousemove(function (e) {
            e.preventDefault();
            if (Object.keys(self.currentInfo).length != 0) {
                let end = {}
                end.x = self.getMousePos(event).x - $("#draw").offset().left;
                end.y = self.getMousePos(event).y - $("#draw").offset().top;
                self.currentInfo.line.plot(self.currentInfo.begin.x, self.currentInfo.begin.y, end.x, end.y);
            }
        })
    },
    /* 创建线条 */
    createLine: function () {
        let self = this,
            line = self.draw.line();
        line.stroke({
            color: "#67C23A",
            width: 2,
            opacity: 0.6,
            linecap: "round"
        });
        line.hide()
        line.click(function () {
            let current = self.lineArr.find(el => {
                return el.line == this;
            });
            $(current.beginElement).removeClass("selected");
            $(current.endElement).removeClass("selected");
            $(current.beginElement).attr('data-selected', '')

            current.endValue = "";
            current.endElement = "";
            current.end = "";

            this.hide();
        });
        line.mouseover(function () {
            let current = self.lineArr.find(el => {
                return el.line == this;
            });
            if (current.endValue) {
                let left, top;
                left =
                    (current.end.x + current.begin.x - 20) / 2 + "px";
                top =
                    (current.end.y + current.begin.y - 20) / 2 + "px";
                $('.remove-btn').css({
                    'left': left,
                    'top': top
                }).show()
                this.addClass("hover-g");
            }
        });
        line.mouseout(function () {
            $('.remove-btn').hide();
            this.removeClass("hover-g");
        });
        /* line.marker("end", 8, 8, function (add) {
            add.polyline([
                [1, 0],
                [1, 8],
                [7, 4],
                [1, 0]
            ]);
            this.fill("#67C23A");
            this.stroke({
                color: "#67C23A",
                opacity: 0.6,
                width: 1
            });
        }); */
        return line;
    },
    /* 遍历question-list，存在默认answer，就去answer-list找到，进行连接 */
    itemForEach: function (flag) {
        let self = this,
            parentPosition = $('#draw').offset();

        if ($('.question-list li').length && $('.answer-list li').length) {

            $('li').removeClass('selected')
            $('.question-list li').each(function (params) {
                let obj = {},
                    _this = $(this),
                    beginValue = _this.attr('data-question'),
                    endValue = _this.attr('data-answer');

                obj = self.lineArr.find(el => el.beginValue == beginValue);
                obj.beginElement = this;
                obj.begin = {};
                obj.begin.y = _this.offset().top - parentPosition.top - 200;
                obj.begin.x = _this.offset().left - parentPosition.left - 100;
                $(this).attr('data-selected', '');
                $('.result-display').html('')
                // obj.line.plot(obj.begin.x, obj.begin.y, obj.begin.x, obj.begin.y)
                //判断是否存在初始答案
                if (endValue && !flag) {
                    $('.answer-list li').each(function (params) {
                        if ($(this).html() == endValue) {
                            obj.end = {};

                            obj.end.y = $(this).offset().top - parentPosition.top + 30;
                            obj.end.x = $(this).offset().left - parentPosition.left - 20;
                            obj.endElement = this;
                            obj.endValue = endValue;
                            obj.line.stroke({
                                color: "#E6A23C",
                            });
                            obj.line.plot(obj.begin.x, obj.begin.y, obj.end.x, obj.end.y);
                            obj.line.show()
                            $(this).addClass("selected")
                            _this.addClass("selected")
                        }
                    })


                }




            })
        }
    },
    /* 获取鼠标的坐标 */
    getMousePos: function (event) {
        var e = event || window.event;
        var scrollX =
            document.documentElement.scrollLeft || document.body.scrollLeft;
        var scrollY =
            document.documentElement.scrollTop || document.body.scrollTop;
        var x = e.pageX || e.clientX + scrollX  ;
        var y = e.pageY || e.clientY + scrollY;
        //alert('x: ' + x + '\ny: ' + y);
        return {
            x: x,
            y: y
        };
    },
}
var e = $('<p>test</p>');
const question = [{
            question: $('<canvas id="clock5" width="150%" height="150%" style="display:block; margin:auto;"></canvas>'),
            questionKey: '123',
            answer: 2
        },
        {
            question: $('<canvas id="clock6" width="150%" height="150%" style="display:block; margin:auto;"></canvas>'),
            questionKey: '2+2',
            answer: 4
        },
        {
            question: $('<canvas id="clock7" width="150%" height="150%" style="display:block; margin:auto;"></canvas>'),
            questionKey: '3+3',
            answer: 5
        },
        {
            question: $('<canvas id="clock8" width="150%" height="150%" style="display:block; margin:auto;"></canvas>'),
            questionKey: '4+4',
            answer: 1
        }
    ],
    time1 = h5 + '點' + m5 + '分';
    time2 = h6 + '點' + m6 + '分';
    time3 = h7 + '點' + m7 + '分';
    time4 = h8 + '點' + m8 + '分';

    var answer = new Array(time1,time2,time3,time4);
    function randomsort(a, b) {
    return Math.random()>.5 ? -1 : 1;
    }
    answer.sort(randomsort);
    
     
  
let questionObj = {
        data: question,
        type: 'question'
    },
    answerObj = {
        data: answer,
        type: 'answer'
    }
line.init(questionObj, answerObj)
</script>


    <div data-role="page" id="time4">
        <h3 align="center">請判斷經過多少時間?</h3>
        <table border="1" width="50%" align="center">
            <tr style="height:280px">
              <td><canvas id="clock9" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
              <td width="5%" style="text-align: center;">經過<input type="number" name="ans4" data-role="none" max="60" min="0" step="5">分</td>
              <td><canvas id="clock10" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
              <td width="5%" style="text-align: center;">經過<input type="number" name="ans5" data-role="none" max="60" min="0" step="5">分</td>
              <td><canvas id="clock11" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>

            </tr>
         </table>

         <table border="1" width="50%" align="center">
            <tr style="height: 280px">
              <td><canvas id="clock12" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
              <td width="5%" style="text-align: center;">經過<input type="number" name="ans6" data-role="none" max="60" min="0" step="5">分</td>
              <td><canvas id="clock13" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
              <td width="5%" style="text-align: center;">經過<input type="number" name="ans7" data-role="none" max="60" min="0" step="5">分</td>
              <td><canvas id="clock14" width="200%" height="200%" style="display:block; margin:auto;"></canvas></td>
            </tr>
         </table>
         <div align="center">
             <a href="#time3" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide" data-direction="reverse">上一題</a>
             <a href="#time5" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide">下一題</a>
         </div>
    </div>

    <div data-role="page" id="time5">
      <h3 align="center">請依作息判斷排序?</h3>

      <table style="width:50%" align="center">
        <tr style="height: 280px">
            <th style="width: 380px" ><script>document.write('<img src="' +cart[0]+ '"width="280" height="280" style="display:block; margin:auto;">');</script></th>
            <th style="width: 380px" ><script>document.write('<img src="' +cart[1]+ '"width="280" height="280" style="display:block; margin:auto;">');</script></th>
          </tr>
          <tr style="height:  40px">
            
          <th><div style="margin: 0px auto; width: 90px;"><input type="number"  name="ans8" min="1" max="4"></div></th>
          <th><div style="margin: 0px auto; width: 90px;"><input type="number"  name="ans9" min="1" max="4"></div></th>      
          </tr>
              
            
      
          <tr style="height: 280px">
            <th style="width: 380px" ><script>document.write('<img src="' +cart[2]+ '"width="280" height="280" style="display:block; margin:auto;">');</script></th>
      
            <th style="width: 380px" ><script>document.write('<img src="' +cart[3]+ '"width="280" height="280" style="display:block; margin:auto;">');</script></th>
      
          </tr>
      
          <tr style="height: 40px">
              <th><div style="margin: 0px auto; width: 90px;"><input type="number"  name="ans10" min="1" max="4"></div></th>
              <th><div style="margin: 0px auto; width: 90px;"><input type="number"  name="ans11" min="1" max="4"></div></th>        
          </tr>
      
    </table>
    <div align="center">
        <a href="#time4" class="ui-btn" style="width: 10%; display: inline-block" data-transition="slide" data-direction="reverse">上一題</a>
        <button type="submit" id="button" style="width: 10%;">結束作答</button>
    </div>
    </div>

		<input type="hidden" id="q1a1" name="q1answer1">
		<input type="hidden" id="q1a2" name="q1answer2">
		<input type="hidden" id="q1a3" name="q1answer3">
		<input type="hidden" id="q1a4" name="q1answer4">
		<input type="hidden" id="q1a1" name="q1answer5">
		<input type="hidden" id="q1a6" name="q1answer6">
		<input type="hidden" id="q1a7" name="q1answer7">
    <input type="hidden" id="q1a8" name="q1answer8">
      


  
  <input type="hidden" id="q4ans1" name="q4answer1"/>	
  <input type="hidden" id="q4ans2" name="q4answer2"/>	
  <input type="hidden" id="q4ans3" name="q4answer3"/>	
  <input type="hidden" id="q4ans4" name="q4answer4"/>	
  <input type="hidden" id="q4opt1" name="q4option1"/>
	<input type="hidden" id="q4opt2" name="q4option2"/>
  <input type="hidden" id="q4opt3" name="q4option3"/>
  <input type="hidden" id="q4opt4" name="q4option4"/>

  <input type="hidden" id="q5ans1" name="q5answer1"/>	
  <input type="hidden" id="q5ans2" name="q5answer2"/>	
  <input type="hidden" id="q5ans3" name="q5answer3"/>	
  <input type="hidden" id="q5ans4" name="q5answer4"/>
  <input type="hidden" id="q5opt1" name="q5option1"/>
	<input type="hidden" id="q5opt2" name="q5option2"/>
  <input type="hidden" id="q5opt3" name="q5option3"/>
  <input type="hidden" id="q5opt4" name="q5option4"/>




  </form>
  <script>



　
yudan_pic = new Array(4);
yudan_pic[0] = "img/clock_img/p1.png";
yudan_pic[1] = "img/clock_img/p2.png";
yudan_pic[2] = "img/clock_img/p3.png";
yudan_pic[3] = "img/clock_img/p4.png";
index = Math.floor(Math.random() * yudan_pic.length);
 
  drawclock("clock1",h1,m1);  //第一題的時鐘            
  drawclock("clock2",h2,m2);
  drawclock("clock3",h3,m3);
  drawclock("clock4",h4,m4);




  drawclock("clock5",h5,m5);  //第三題的時鐘            
  drawclock("clock6",h6,m6);
  drawclock("clock7",h7,m7);
  drawclock("clock8",h8,m8);







 
  
  

  var h9 = Math.floor(Math.random() * 12) + 1;
  var m5 = Math.floor(Math.random() * 12) * 5;
  var h10=h9;
  var m6 = m5+Math.floor(Math.random() * 12) * 5;
  if(m6>60){
    m6-=60;
    h10+=1;
  }
  if(m6==60){
    m6=0;
    h10+=1;
  }
  var h11=h10;
  var m7 = m6+Math.floor(Math.random() * 12) * 5;
  if(m7>60){
    m7-=60;
    h11+=1;
  }
  var h12 = Math.floor(Math.random() * 12) + 1;
  var m8 = Math.floor(Math.random() * 12) * 5;
  var h13=h12;
  var m9 = m8+Math.floor(Math.random() * 12) * 5;
  if(m9>60){
    m9-=60;
    h13+=1;
  }
  var h14=h13;
  var m10 = m9+Math.floor(Math.random() * 12) * 5;
  if(m10>60){
    m10-=60;
    h14+=1;
  }

  drawclock("clock9",h9,m5);  //第四題的時鐘           
  drawclock("clock10",h10,m6);
  drawclock("clock11",h11,m7);
  drawclock("clock12",h12,m8);
  drawclock("clock13",h13,m9);
  drawclock("clock14",h14,m10);

var f0 =Math.floor(Math.random() * 3);
var f1 =Math.floor(Math.random() * 3);
var f2 =Math.floor(Math.random() * 3);
var f3 =Math.floor(Math.random() * 3);
var h51;
var h52;
var h61;
var h62;
var h71;
var h72;
var h81;
var h82;


if(f0==0){
  h51 = h5 + 1;
  h52 = h5 + 2;
  if(h51>12){
    h51-=12;
  }
  if(h52>12){
    h52-=12;
  }
document.getElementById('f00').innerHTML = h5;
document.getElementById('f01').innerHTML = h51;
document.getElementById('f02').innerHTML = h52;

}

if(f0==1){
  var h51 = h5-1;
  var h52 = h5+1;
  if(h51<=0){
    h51+=12;
  }
  if(h52>12){
    h52-=12;
  }
document.getElementById('f00').innerHTML = h51;
document.getElementById('f01').innerHTML = h5;
document.getElementById('f02').innerHTML = h52;
}

if(f0==2){
  var h51 = h5-2;
  var h52 = h5-1;
  if(h51<=0){
    h51+=12;
  }
  if(h52<=0){
    h52+=12;
  }
document.getElementById('f00').innerHTML = h51;
document.getElementById('f01').innerHTML = h52;
document.getElementById('f02').innerHTML = h5;
}



if(f1==0){
  var h61 = h6 + 1;
  var h62 = h6 + 2;
  if(h61>12){
    h61-=12;
  }
  if(h62>12){
    h62-=12;
  }
document.getElementById('f03').innerHTML = h6;
document.getElementById('f04').innerHTML = h61;
document.getElementById('f05').innerHTML = h62;
}
if(f1==1){
  var h61 = h6-1;
  var h62 = h6+1;
  if(h61<=0){
    h61+=12;
  }
  if(h62>12){
    h62-=12;
  }
document.getElementById('f03').innerHTML = h61;
document.getElementById('f04').innerHTML = h6;
document.getElementById('f05').innerHTML = h62;
}
if(f1==2){
  var h61 = h6-2;
  var h62 = h6-1;
  if(h61<=0){
    h61+=12;
  }
  if(h62<=0){
    h62+=12;
  }
document.getElementById('f03').innerHTML = h61;
document.getElementById('f04').innerHTML = h62;
document.getElementById('f05').innerHTML = h6;
}






if(f2==0){
  var h71 = h7 + 1;
  var h72 = h7 + 2;
  if(h71>12){
    h71-=12;
  }
  if(h72>12){
    h72-=12;
  }
document.getElementById('f06').innerHTML = h7;
document.getElementById('f07').innerHTML = h71;
document.getElementById('f08').innerHTML = h72;
}
if(f2==1){
  var h71 = h7-1;
  var h72 = h7+1;
  if(h71<=0){
    h71+=12;
  }
  if(h72>12){
    h72-=12;
  }
document.getElementById('f06').innerHTML = h71;
document.getElementById('f07').innerHTML = h7;
document.getElementById('f08').innerHTML = h72;
}
if(f2==2){
  var h71 = h7-2;
  var h72 = h7-1;
  if(h71<=0){
    h71+=12;
  }
  if(h72<=0){
    h72+=12;
  }
document.getElementById('f06').innerHTML = h71;
document.getElementById('f07').innerHTML = h72;
document.getElementById('f08').innerHTML = h7;
}



if(f3==0){
  var h81 = h8 + 1;
  var h82 = h8 + 2;
  if(h81>12){
    h81-=12;
  }
  if(h82>12){
    h82-=12;
  }
document.getElementById('f09').innerHTML = h8;
document.getElementById('f10').innerHTML = h81;
document.getElementById('f11').innerHTML = h82;
}
if(f3==1){
  var h81 = h8-1;
  var h82 = h8+1;
  if(h81<=0){
    h81+=12;
  }
  if(h82>12){
    h82-=12;
  }
document.getElementById('f09').innerHTML = h81;
document.getElementById('f10').innerHTML = h8;
document.getElementById('f11').innerHTML = h82;
}
if(f3==2){
  var h81 = h8-2;
  var h82 = h8-1;
  if(h81<=0){
    h81+=12;
  }
  if(h82<=0){
    h82+=12;
  }
document.getElementById('f09').innerHTML = h81;
document.getElementById('f10').innerHTML = h82;
document.getElementById('f11').innerHTML = h8; 
}

</script>
</body>

</html>